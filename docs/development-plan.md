# TelecomBase — план разработки (курсовая)

Дата: 21 декабря 2025 г.

Проект: **TelecomBase** — десктопное приложение для создания и обработки сведений базы данных телекоммуникационного оборудования.

Ограничения и требования:
- ОС: Linux.
- Интерфейс: Qt (C++), стиль именования: `camelCase`.
- Backend: Golang (API/служба).
- Хранилище: PostgreSQL.
- Развёртывание: Docker обязателен (как минимум для БД и Go‑сервиса).
- UX: понятные формы, таблицы, поиск, корректные сообщения об ошибках.
- ИБ: защита от SQL‑инъекций и базовые меры безопасности (валидация, хэширование паролей, разграничение прав).

---

## 1) Цель и результат

Цель: реализовать удобное десктопное приложение, позволяющее пользователю:
- входить в систему;
- вести справочники (минимум: производители, модели, локации);
- вести учёт оборудования (устройства) с возможностью добавления/редактирования/удаления;
- выполнять обработку данных (поиск/фильтрация/сортировка);
- сохранять/загружать данные через БД;
- выгружать отчёт (CSV);
- продемонстрировать контрольный пример на защите.

Результат сдачи:
- исходники в Git‑репозитории;
- Docker‑конфигурация запуска (compose);
- исполняемый файл/собираемый проект Qt;
- документация (ТЗ, ПЗ, руководства, контрольный пример).

---

## 2) Выбранная архитектура (desktop + API + DB)

### 2.1 Компоненты
- **Qt Desktop (C++)**
  - графический интерфейс;
  - клиентская валидация;
  - запросы к Go API по HTTP(S) (локально).

- **Go API (Docker)**
  - бизнес‑логика;
  - авторизация;
  - доступ к PostgreSQL;
  - централизованная обработка ошибок и логирование.

- **PostgreSQL (Docker)**
  - хранение данных;
  - ограничения целостности (FK, UNIQUE);
  - индексы на поля поиска.

### 2.2 Поток данных
Qt → (HTTP) → Go API → (параметризованные SQL‑запросы) → PostgreSQL.

---

## 3) Функциональный объём (MVP для защиты)

### 3.1 Аутентификация и роли
- Регистрация пользователя.
- Вход/выход.
- Роли:
  - `admin`: полные права.
  - `user`: просмотр/добавление/редактирование (удаление — по решению).

### 3.2 Сущности предметной области (достаточно для курсовой)
Минимальный набор таблиц:
- `users` — пользователи.
- `vendors` — производители.
- `models` — модели оборудования (ссылка на vendor).
- `locations` — места установки/учёта.
- `devices` — устройства (ссылка на model и location).

### 3.3 Операции над данными
- Просмотр в таблице (постранично или простой список).
- Сортировка по колонкам.
- Поиск по ключевым полям (например: серийный/инвентарный номер, модель, статус).
- Добавить/редактировать/удалить.
- Экспорт в CSV (список устройств).

---

## 4) Проектирование БД (черновая схема)

### 4.1 Таблицы (предложение)
- `users(id, username, password_hash, role, created_at)`
  - `UNIQUE(username)`

- `vendors(id, name, country)`
  - `UNIQUE(name)` (по желанию)

- `models(id, vendor_id, name, device_type)`
  - `FOREIGN KEY(vendor_id)`

- `locations(id, name, note)`

- `devices(id, model_id, location_id, serial_number, inventory_number, status, installed_at, description)`
  - `FOREIGN KEY(model_id)`, `FOREIGN KEY(location_id)`
  - `UNIQUE(serial_number)` (по желанию)

### 4.2 Индексы
- `devices(serial_number)`
- `devices(inventory_number)`
- `devices(status)`

---

## 5) Информационная безопасность (минимально необходимое)

Обязательное:
- **Без SQL‑инъекций:** только параметризованные запросы / prepared statements в Go.
  - Запрещено: конкатенация SQL‑строк с пользовательским вводом.

Рекомендуемое (для защиты и отчёта):
- Пароли хранить только как `password_hash` (bcrypt/argon2).
- Валидация входных данных (длины, форматы, обязательность полей).
- Роли и проверки прав на API‑уровне.
- Раздельный пользователь БД для приложения без расширенных прав.
- Корректные сообщения об ошибках в UI (без утечки внутренностей), детали — в логах API.

---

## 6) Docker и запуск

Минимальный набор:
- `docker-compose.yml`
  - `postgres` с volume.
  - `api` (Go) + переменные окружения.
- Миграции БД:
  - SQL‑файлы миграций или инструмент миграции.

Qt‑клиент (desktop) собирается и запускается на Linux вне Docker.

---

## 7) План-график работ (этапы)

### Этап 0 — Уточнение (0.5 дня)
Результат:
- утверждён список сущностей/полей и сценарий контрольного примера.

### Этап 1 — Проектирование (1–2 дня)
Результат:
- ER‑схема;
- макеты экранов (в соответствии с ТЗ: вход/регистрация, главная, форма ввода);
- спецификация API (черновик эндпоинтов).

### Этап 2 — Инфраструктура (1 день)
Результат:
- `docker-compose.yml` поднимает Postgres + Go API;
- миграции создают схему БД;
- конфиг `.env`/переменные окружения для подключения.

### Этап 3 — Go API (3–5 дней)
Результат:
- реализованы регистрация/вход;
- CRUD для `vendors`, `models`, `locations`, `devices`;
- поиск/фильтрация;
- логирование и единый формат ошибок;
- подтверждена защита от SQL‑инъекций (только параметризованные запросы).

### Этап 4 — Qt Desktop (4–7 дней)
Результат:
- окно авторизации/регистрации;
- главное окно с таблицей устройств, поиском и кнопками управления;
- формы добавления/редактирования;
- экспорт CSV;
- сообщения об ошибках и валидация.

### Этап 5 — Интеграция и контрольный пример (1–2 дня)
Результат:
- сквозной сценарий демонстрации (от входа до отчёта);
- устойчивость к ошибкам (невалидный ввод, недоступен API/БД);
- демонстрация отсутствия SQL‑инъекции.

### Этап 6 — Документация и сдача (2–3 дня)
Результат:
- ТЗ (по ГОСТ 19.201‑78, с конкретизацией под TelecomBase);
- пояснительная записка (архитектура, БД, алгоритмы обработки, ИБ);
- руководство пользователя;
- руководство системному программисту;
- контрольный пример.

---

## 8) Критерии готовности (чек‑лист)

Функционал:
- [x] вход/регистрация работают;
- [x] CRUD по устройствам и справочникам работает (API + UI для admin);
- [x] поиск/сортировка работают (поиск по API + сортировка в таблице);
- [x] экспорт CSV работает (список устройств).

Надёжность:
- [x] невалидный ввод не приводит к падению (валидация на API + проверки в UI);
- [x] понятные сообщения об ошибках в UI.

ИБ:
- [x] SQL‑инъекция невозможна (параметризованные запросы);
- [x] пароли хэшируются.

Развёртывание:
- [x] `docker compose up` поднимает БД и API;
- [x] Qt‑клиент подключается к API локально (HTTP + JWT).

Примечание по сборке клиента: для сборки Qt‑клиента требуются Qt6 dev‑пакеты (CMake должен видеть `Qt6Config.cmake`).

Документация:
- [ ] ТЗ, ПЗ, руководства, контрольный пример подготовлены.
